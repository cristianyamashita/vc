<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg-color: #1a1a1a;
            --text-color: #ffffff;
            --btn-bg: #333333;
            --btn-text-color: #ffffff;
            --border-color: #444444;
            --input-bg: #222222;
            --input-text-color: #ffffff;
            --modal-bg: #2d2d2d;
            --modal-header-bg: #333333;
            --slider-bg: #ccc;
            --slider-checked-bg: #2196F3;
            --copied-bg: #28a745;
        }

        body.light-theme {
            --bg-color: #ffffff;
            --text-color: #000000;
            --btn-bg: #f8f9fa;
            --btn-text-color: #000000;
            --border-color: #dee2e6;
            --input-bg: #ffffff;
            --input-text-color: #000000;
            --modal-bg: #ffffff;
            --modal-header-bg: #f8f9fa;
            --copied-bg: #28a745;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .lang-selector a {
            color: var(--text-color);
            text-decoration: none;
            padding: 5px;
            border-radius: 3px;
        }
        .lang-selector a.active {
            font-weight: bold;
        }

        .btn-outline-secondary {
            color: var(--text-color);
            border-color: var(--border-color);
        }

        .btn-outline-secondary:hover {
            background-color: var(--border-color);
            color: var(--text-color);
        }

        .nav-tabs .nav-link {
            color: var(--text-color);
            background-color: var(--btn-bg);
            border-color: var(--border-color);
        }

        .nav-tabs .nav-link.active {
            color: var(--text-color);
            background-color: var(--bg-color);
            border-color: var(--border-color);
        }

        .form-control, .form-select, .form-check-input {
            background-color: var(--input-bg);
            color: var(--input-text-color);
            border: 1px solid var(--border-color);
        }

        .form-control:focus, .form-select:focus {
            background-color: var(--input-bg);
            color: var(--input-text-color);
            border-color: #86b7fe;
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
        }

        .input-group-text {
            background-color: var(--input-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .copy-feedback {
            transition: opacity 0.5s;
        }

        .progress {
            background-color: var(--border-color);
        }

        .progress-bar {
            transition: width 0.3s ease;
        }

        .strength-weak {
            background-color: #dc3545;
        }

        .strength-medium {
            background-color: #ffc107;
        }

        .strength-strong {
            background-color: #28a745;
        }

        .strength-very-strong {
            background-color: #17a2b8;
        }

    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 data-i18n="title">Password Generator</h1>
            <div class="d-flex align-items-center">
                <div class="theme-selector me-2">
                    <button id="theme-toggle-btn" class="btn btn-outline-secondary">◑</button>
                </div>
                <div class="lang-selector">
                    <a href="#" data-lang="en" class="active">EN</a>
                    <a href="#" data-lang="ja">JA</a>
                    <a href="#" data-lang="pt">PT</a>
                </div>
            </div>
        </div>

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="random-tab" data-bs-toggle="tab" data-bs-target="#random-tab-pane" type="button" role="tab" aria-controls="random-tab-pane" aria-selected="true" data-i18n="randomTab">Random</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="hacker-tab" data-bs-toggle="tab" data-bs-target="#hacker-tab-pane" type="button" role="tab" aria-controls="hacker-tab-pane" aria-selected="false" data-i18n="hackerTab">Hacker Mode</button>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active p-3 border border-top-0" id="random-tab-pane" role="tabpanel" aria-labelledby="random-tab" tabindex="0">
                <div class="mb-3">
                    <label for="length-slider" class="form-label">
                        <span data-i18n="lengthLabel">Password Length:</span> <span id="length-value">12</span>
                    </label>
                    <input type="range" class="form-range" min="4" max="64" id="length-slider" value="12">
                </div>
                <div class="mb-3">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="include-uppercase" checked>
                        <label class="form-check-label" for="include-uppercase" data-i18n="uppercaseLabel">Uppercase</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="include-lowercase" checked>
                        <label class="form-check-label" for="include-lowercase" data-i18n="lowercaseLabel">Lowercase</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="include-numbers" checked>
                        <label class="form-check-label" for="include-numbers" data-i18n="numbersLabel">Numbers</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="include-symbols" checked>
                        <label class="form-check-label" for="include-symbols" data-i18n="symbolsLabel">Symbols</label>
                    </div>
                </div>
                <button id="generate-random-btn" class="btn btn-primary" data-i18n="generateButton">Generate Password</button>
            </div>
            <div class="tab-pane fade p-3 border border-top-0" id="hacker-tab-pane" role="tabpanel" aria-labelledby="hacker-tab" tabindex="0">
                <div class="mb-3">
                    <label for="hacker-input" class="form-label" data-i18n="hackerInputLabel">Enter a word:</label>
                    <input type="text" class="form-control" id="hacker-input" placeholder="e.g., password">
                </div>
                <button id="generate-hacker-btn" class="btn btn-primary" data-i18n="generateButton">Generate Password</button>
            </div>
        </div>

        <div class="mt-4">
            <label for="password-output" class="form-label" data-i18n="generatedPasswordLabel">Generated Password:</label>
            <div class="input-group">
                <input type="text" class="form-control" id="password-output" placeholder="Generated password will appear here...">
                <button class="btn btn-outline-secondary" id="copy-btn">
                    <i class="fas fa-copy"></i>
                </button>
            </div>
            <div class="form-text text-muted mb-2" data-i18n="editHint">💡 You can edit the password above to customize it further</div>
            <div id="copy-feedback" class="form-text opacity-0" data-i18n="copiedFeedback">Copied to clipboard!</div>
            
            <!-- Password Strength Estimator -->
            <div class="mt-3" id="strength-estimator" style="display: none;">
                <label class="form-label" data-i18n="strengthLabel">Password Strength:</label>
                <div class="d-flex align-items-center mb-2">
                    <div class="progress flex-grow-1 me-3" style="height: 8px;">
                        <div class="progress-bar" id="strength-bar" role="progressbar" style="width: 0%"></div>
                    </div>
                    <span class="badge" id="strength-text">Weak</span>
                </div>
                <div class="form-text" id="crack-time-estimate" data-i18n="crackTimeEstimate">Estimated time to crack: Instant</div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const translations = {
            en: {
                title: "Password Generator",
                randomTab: "Random",
                hackerTab: "Hacker Mode",
                lengthLabel: "Password Length:",
                uppercaseLabel: "Uppercase",
                lowercaseLabel: "Lowercase",
                numbersLabel: "Numbers",
                symbolsLabel: "Symbols",
                generateButton: "Generate Password",
                hackerInputLabel: "Enter a word:",
                generatedPasswordLabel: "Generated Password:",
                copiedFeedback: "Copied to clipboard!",
                strengthLabel: "Password Strength:",
                crackTimeEstimate: "Estimated time to crack: ",
                editHint: "💡 You can edit the password above to customize it further",
                alert_no_character_type: "Please select at least one character type.",
                alert_no_word: "Please enter a word.",
            },
            ja: {
                title: "パスワード生成ツール",
                randomTab: "ランダム",
                hackerTab: "ハッカーモード",
                lengthLabel: "パスワードの長さ:",
                uppercaseLabel: "大文字",
                lowercaseLabel: "小文字",
                numbersLabel: "数字",
                symbolsLabel: "記号",
                generateButton: "パスワードを生成",
                hackerInputLabel: "単語を入力してください:",
                generatedPasswordLabel: "生成されたパスワード:",
                copiedFeedback: "クリップボードにコピーしました！",
                strengthLabel: "パスワード強度:",
                crackTimeEstimate: "クラック推定時間: ",
                editHint: "💡 上記のパスワードを編集して、さらにカスタマイズできます",
                alert_no_character_type: "少なくとも1つの文字タイプを選択してください。",
                alert_no_word: "単語を入力してください。",
            },
            pt: {
                title: "Gerador de Senhas",
                randomTab: "Aleatório",
                hackerTab: "Modo Hacker",
                lengthLabel: "Comprimento da Senha:",
                uppercaseLabel: "Maiúsculas",
                lowercaseLabel: "Minúsculas",
                numbersLabel: "Números",
                symbolsLabel: "Símbolos",
                generateButton: "Gerar Senha",
                hackerInputLabel: "Digite uma palavra:",
                generatedPasswordLabel: "Senha Gerada:",
                copiedFeedback: "Copiado para a área de transferência!",
                strengthLabel: "Força da Senha:",
                crackTimeEstimate: "Tempo estimado para quebrar: ",
                editHint: "💡 Você pode editar a senha acima para personalizá-la ainda mais",
                alert_no_character_type: "Por favor, selecione pelo menos um tipo de caractere.",
                alert_no_word: "Por favor, insira uma palavra.",
            }
        };

        function setLanguage(lang) {
            document.documentElement.lang = lang;
            localStorage.setItem('password_generator_lang', lang);

            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    el.textContent = translations[lang][key];
                } else {
                    el.textContent = translations.en[key];
                }
            });

            document.querySelectorAll('.lang-selector a').forEach(a => {
                a.classList.toggle('active', a.getAttribute('data-lang') === lang);
            });

            // Update strength indicator if there's a password
            const currentPassword = document.getElementById('password-output').value;
            if (currentPassword) {
                updateStrengthIndicator(currentPassword);
            }
        }

        function initLang() {
            const savedLang = localStorage.getItem('password_generator_lang');
            const browserLang = navigator.language.split('-')[0];
            const initialLang = savedLang || (translations[browserLang] ? browserLang : 'en');
            setLanguage(initialLang);
        }

        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            const theme = document.body.classList.contains('light-theme') ? 'light' : 'dark';
            localStorage.setItem('password_generator_theme', theme);
        }

        function initTheme() {
            const savedTheme = localStorage.getItem('password_generator_theme') || 'dark';
            if (savedTheme === 'light') {
                document.body.classList.add('light-theme');
            }
        }

        function generateRandomPassword(length, useUpper, useLower, useNumbers, useSymbols) {
            const upper = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const lower = 'abcdefghijklmnopqrstuvwxyz';
            const numbers = '0123456789';
            const symbols = '!@#$%^&*()_+~`|}{[]:;?><,./-=';

            let charset = '';
            if (useUpper) charset += upper;
            if (useLower) charset += lower;
            if (useNumbers) charset += numbers;
            if (useSymbols) charset += symbols;

            if (charset === '') return '';

            let password = '';
            for (let i = 0; i < length; i++) {
                password += charset.charAt(Math.floor(Math.random() * charset.length));
            }
            return password;
        }

        function generateHackerPassword(word) {
            const transformations = {
                'a': ['@', '4'],
                'e': ['3'],
                'i': ['1', '!'],
                'o': ['0'],
                's': ['$', '5'],
                't': ['7'],
                'b': ['8'],
                'g': ['9']
            };

            let result = '';
            for (let char of word) {
                const lowerChar = char.toLowerCase();
                if (transformations[lowerChar] && Math.random() > 0.5) {
                    const options = transformations[lowerChar];
                    result += options[Math.floor(Math.random() * options.length)];
                } else {
                    result += Math.random() > 0.5 ? char.toUpperCase() : char.toLowerCase();
                }
            }
            return result;
        }

        function calculatePasswordStrength(password) {
            if (!password) return { strength: 'weak', score: 0, crackTime: 'Instant' };
            
            let score = 0;
            let charset = 0;
            
            // Check character types
            if (/[a-z]/.test(password)) { score += 1; charset += 26; }
            if (/[A-Z]/.test(password)) { score += 1; charset += 26; }
            if (/[0-9]/.test(password)) { score += 1; charset += 10; }
            if (/[^a-zA-Z0-9]/.test(password)) { score += 1; charset += 32; }
            
            // Length bonus
            score += Math.min(Math.floor(password.length / 8), 3);
            
            // Calculate possible combinations
            const combinations = Math.pow(charset, password.length);
            
            // Assume 1 billion attempts per second (modern computer)
            const attemptsPerSecond = 1000000000;
            const seconds = combinations / attemptsPerSecond;
            
            let crackTime;
            if (seconds < 1) crackTime = 'Instant';
            else if (seconds < 60) crackTime = `${Math.ceil(seconds).toLocaleString()} seconds`;
            else if (seconds < 3600) crackTime = `${Math.ceil(seconds / 60).toLocaleString()} minutes`;
            else if (seconds < 86400) crackTime = `${Math.ceil(seconds / 3600).toLocaleString()} hours`;
            else if (seconds < 31536000) crackTime = `${Math.ceil(seconds / 86400).toLocaleString()} days`;
            else crackTime = `${Math.ceil(seconds / 31536000).toLocaleString()} years`;
            
            // Determine strength level
            let strength, strengthClass;
            if (score <= 2) {
                strength = 'Weak';
                strengthClass = 'strength-weak';
            } else if (score <= 4) {
                strength = 'Medium';
                strengthClass = 'strength-medium';
            } else if (score <= 6) {
                strength = 'Strong';
                strengthClass = 'strength-strong';
            } else {
                strength = 'Very Strong';
                strengthClass = 'strength-very-strong';
            }
            
            return {
                strength: strength,
                score: score,
                crackTime: crackTime,
                strengthClass: strengthClass,
                percentage: Math.min((score / 7) * 100, 100)
            };
        }

        function updateStrengthIndicator(password) {
            const strengthEstimator = document.getElementById('strength-estimator');
            const strengthBar = document.getElementById('strength-bar');
            const strengthText = document.getElementById('strength-text');
            const crackTimeEstimate = document.getElementById('crack-time-estimate');
            
            if (!password) {
                strengthEstimator.style.display = 'none';
                return;
            }
            
            const strength = calculatePasswordStrength(password);
            
            // Show the estimator
            strengthEstimator.style.display = 'block';
            
            // Update progress bar
            strengthBar.style.width = `${strength.percentage}%`;
            strengthBar.className = `progress-bar ${strength.strengthClass}`;
            
            // Update strength text
            strengthText.textContent = strength.strength;
            strengthText.className = `badge ${strength.strengthClass === 'strength-weak' ? 'bg-danger' : 
                                                          strength.strengthClass === 'strength-medium' ? 'bg-warning' : 
                                                          strength.strengthClass === 'strength-strong' ? 'bg-success' : 'bg-info'}`;
            
            // Update crack time estimate
            const currentLang = document.documentElement.lang || 'en';
            const timeText = translations[currentLang]?.crackTimeEstimate || translations.en.crackTimeEstimate;
            
            // Extract the time unit from the crack time
            const timeMatch = strength.crackTime.match(/^(\d[\d,]*)\s*(.+)$/);
            if (timeMatch) {
                const number = timeMatch[1];
                const unit = timeMatch[2];
                
                // Translate the time unit based on language
                let translatedUnit;
                if (currentLang === 'ja') {
                    translatedUnit = {
                        'seconds': '秒',
                        'minutes': '分',
                        'hours': '時間',
                        'days': '日',
                        'years': '年'
                    }[unit] || unit;
                } else if (currentLang === 'pt') {
                    translatedUnit = {
                        'seconds': 'segundos',
                        'minutes': 'minutos',
                        'hours': 'horas',
                        'days': 'dias',
                        'years': 'anos'
                    }[unit] || unit;
                } else {
                    translatedUnit = unit;
                }
                
                crackTimeEstimate.textContent = timeText + `${number} ${translatedUnit}`;
            } else {
                crackTimeEstimate.textContent = timeText + strength.crackTime;
            }
        }


        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            initLang();

            const lengthSlider = document.getElementById('length-slider');
            const lengthValue = document.getElementById('length-value');
            const generateRandomBtn = document.getElementById('generate-random-btn');
            const generateHackerBtn = document.getElementById('generate-hacker-btn');
            const passwordOutput = document.getElementById('password-output');
            const copyBtn = document.getElementById('copy-btn');
            const copyFeedback = document.getElementById('copy-feedback');

            document.getElementById('theme-toggle-btn').addEventListener('click', toggleTheme);
            document.querySelector('.lang-selector').addEventListener('click', (event) => {
                event.preventDefault();
                const lang = event.target.getAttribute('data-lang');
                if (lang) {
                    setLanguage(lang);
                }
            });

            lengthSlider.addEventListener('input', (e) => {
                lengthValue.textContent = e.target.value;
            });

            generateRandomBtn.addEventListener('click', () => {
                const length = parseInt(lengthSlider.value, 10);
                const useUpper = document.getElementById('include-uppercase').checked;
                const useLower = document.getElementById('include-lowercase').checked;
                const useNumbers = document.getElementById('include-numbers').checked;
                const useSymbols = document.getElementById('include-symbols').checked;

                if (!useUpper && !useLower && !useNumbers && !useSymbols) {
                    alert(translations[document.documentElement.lang]?.alert_no_character_type || translations.en.alert_no_character_type);
                    return;
                }

                const password = generateRandomPassword(length, useUpper, useLower, useNumbers, useSymbols);
                passwordOutput.value = password;
                updateStrengthIndicator(password);
            });

            generateHackerBtn.addEventListener('click', () => {
                const word = document.getElementById('hacker-input').value;
                if (word.trim() === '') {
                    alert(translations[document.documentElement.lang]?.alert_no_word || translations.en.alert_no_word);
                    return;
                }
                const password = generateHackerPassword(word);
                passwordOutput.value = password;
                updateStrengthIndicator(password);
            });

            copyBtn.addEventListener('click', () => {
                if (passwordOutput.value) {
                    navigator.clipboard.writeText(passwordOutput.value).then(() => {
                        copyFeedback.classList.remove('opacity-0');
                        setTimeout(() => {
                            copyFeedback.classList.add('opacity-0');
                        }, 2000);
                    });
                }
            });

            // Real-time strength update for password output field
            passwordOutput.addEventListener('input', function() {
                updateStrengthIndicator(this.value);
            });
        });
    </script>
</body>
</html>
